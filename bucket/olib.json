{
    "version": "2.4.0",
    "homepage": "https://gitee.com/morning-start/o-lib",
    "license": "GPL-3.0-only",
    "url": "https://gitee.com/morning-start/o-lib/releases/download/v2.4.0/Olib2.4.0.zip",
    "hash": "468EEE9AAD35BD90C936AE48D357FD740832E4676EC71152BEB6AEA02FAE0A69",
    "extract_dir": "Olib",
    "shortcuts": [["Olib.exe", "Olib"]],
    "persist": ["config", "cache", "book"],
    "checkver": {
        "url": "https://gitee.com/api/v5/repos/morning-start/o-lib/releases/latest",
        "jsonpath": "$.tag_name"
    },
    "autoupdate": {
        "url": "https://gitee.com/morning-start/o-lib/releases/download/v${version}/Olib${version}.zip",
        "hash": {
            "url": "https://gitee.com/morning-start/o-lib/releases/download/v${version}/Olib${version}.sha256"
        }
    },
    "post_install": [
        "$configFilePath = \"$persist_dir\\config\\config.json\"",
        "if (-not (Test-Path -Path $configFilePath)) {",
        "    $config = @{",
        "        \"Settings\" = @{",
        "            \"CacheFolder\" = \"$persist_dir\\cache\"",
        "            \"DownloadFolder\" = \"$persist_dir\\book\"",
        "        }",
        "    }",
        "}",
        "else {",
        "    $config = Get-Content -Path $configFilePath | ConvertFrom-Json",
        "    $config.Settings.CacheFolder = \"$persist_dir\\cache\"",
        "    $config.Settings.DownloadFolder = \"$persist_dir\\book\"",
        "}",
        "ConvertTo-Json $config | Set-Content -Path $configFilePath",
        "Write-Host \"Configuration updated successfully.\""
    ]
}
