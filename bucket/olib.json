{
    "version": "2.4.2",
    "homepage": "https://gitee.com/morning-start/o-lib",
    "license": "GPL-3.0-only",
    "url": "https://gitee.com/morning-start/o-lib/releases/download/v2.4.2/Olib2.4.2.zip",
    "hash": "eed6db04a92fd0b93d77d2ea3b5532a3d49bc4f71dce7d16570acb4372d3a861",
    "shortcuts": [
        [
            "Olib.exe",
            "Olib"
        ]
    ],
    "persist": [
        "config",
        "cache",
        "book"
    ],
    "checkver": {
        "url": "https://gitee.com/api/v5/repos/morning-start/o-lib/releases/latest",
        "jp": "$.tag_name",
        "re": "v([\\d.]+)"
    },
    "autoupdate": {
        "url": "https://gitee.com/morning-start/o-lib/releases/download/v$version/Olib$version.zip",
        "hash": {
            "url": "https://gitee.com/morning-start/o-lib/releases/download/v$version/Olib$version.sha256"
        }
    },
    "post_install": [
        "$configFilePath=\"$persist_dir\\config\\config.json\"",
        "if (-not (Test-Path -Path $configFilePath)) {",
        "    $config=@{",
        "        \"Settings\"=@{",
        "            \"CacheFolder\"=\"$persist_dir\\cache\"",
        "            \"DownloadFolder\"=\"$persist_dir\\book\"",
        "        }",
        "    }",
        "}",
        "else {",
        "    $config=Get-Content -Path $configFilePath | ConvertFrom-Json",
        "    $config.Settings.CacheFolder=\"$persist_dir\\cache\"",
        "    $config.Settings.DownloadFolder=\"$persist_dir\\book\"",
        "}",
        "ConvertTo-Json $config | Set-Content -Path $configFilePath",
        "Write-Host \"Configuration updated successfully.\""
    ]
}
